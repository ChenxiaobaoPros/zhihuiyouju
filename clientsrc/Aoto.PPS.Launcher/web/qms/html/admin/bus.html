<!DOCTYPE>
<html lang="en">
<head>
    <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Free HTML5 Bootstrap Admin Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Charisma, a fully featured, responsive, HTML5, Bootstrap admin template.">
    <meta name="author" content="Muhammad Usman">

    <!-- The styles -->
    <link id="bs-css" href="../../css/bootstrap-11.min.css" rel="stylesheet">
    <link href="../../css/charisma-app.css" rel="stylesheet">
    <link href='../../css/chosen.min.css' rel='stylesheet'>
    <link href='../../css/colorbox.css' rel='stylesheet'>
    <link href='../../css/responsive-tables.css' rel='stylesheet'>
    <link href='../../css/bootstrap-tour.min.css' rel='stylesheet'>
    <link href='../../css/jquery.noty.css' rel='stylesheet'>
    <link href='../../css/noty_theme_default.css' rel='stylesheet'>
    <link href='../../css/elfinder.min.css' rel='stylesheet'>
    <link href='../../css/elfinder.theme.css' rel='stylesheet'>
    <link href='../../css/jquery.iphone.toggle.css' rel='stylesheet'>
    <link href='../../css/uploadify.css' rel='stylesheet'>
    <link href='../../css/animate.min.css' rel='stylesheet'>
    <link rel="stylesheet"  href="../../css/button.css"/>
    <link rel="stylesheet"  href="../../css/commonlist.css"/>
    <link rel="stylesheet"  href="../../css/icheck/yellow.css"/>

    <!-- jQuery -->
	<script type="text/javascript" src="../../js/lib/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="../../js/lib/jquery/plugins/jquery.string.js"></script>
	<script type="text/javascript" src="../../js/lib/jquery/plugins/jquery.json.js"></script>
	<script type="text/javascript" src="../../js/lib/easyui/plugins/jquery.draggable.js"></script>
	<script type="text/javascript" src="../../js/lib/easyui/plugins/jquery.parser.js"></script>
    <script type="text/javascript" src="../../../js/peripheral.js"></script>
	<script type="text/javascript" src="../../js/map.js"></script>
	<script src="../../js/lib/jquery/icheck/jquery.icheck.js" type="text/javascript" ></script>
 
    <!-- The fav icon -->
    <link rel="shortcut icon" href="../../images/favicon.ico">

</head>
<body>
	<div id="loading1">
		<div>
			<image src='../../js/lib/easyui/themes/default/images/loading.gif' />  正在处理，请稍等...
		</div>
	</div>
   
<div class="ch-container" id="container" style="display: none;">
    <div class="row">
        
        <noscript>
            <div class="alert alert-block col-md-12">
                <h4 class="alert-heading">Warning!</h4>

               <!-- <p>You need to have <a href="http://en.wikipedia.org/wiki/JavaScript" target="_blank">JavaScript</a>
                    enabled to use this site.</p>-->
            </div>
        </noscript>

        <div id="content" class="col-lg-12 col-sm-12">
            <!-- content starts -->


	<div class="row">
        <div class="box col-md-12">
            <div class="box-inner">
                <div class="box-header well" data-original-title="">
                    <h2><i class="glyphicon glyphicon-info-sign"></i>业务设置</h2>

                    <div class="box-icon">
                        <a href="#" class="btn btn-minimize btn-round btn-default"><i
                                class="glyphicon glyphicon-chevron-up"></i></a>
                    </div>
                </div>
                <div class="busshow box-content">						
					<table class="table table-striped table-bordered responsive" id="ccc">
                        <thead>
                        <tr>
                        	<th style="width:5%;">序号</th>
							<th style="width:">一级业务类型编号</th>
							<th style="width:">业务类型编号</th>
                            <th style="width:">业务类型名称</th>
                            <th style="width:">对应业务类型编号</th>
                            <th style="width:">对应业务类型名称</th>
                        </tr>
                        </thead>
                        <tbody>						

                        </tbody>
                   </table>
                </div>
            </div>
        </div>
        <!--/span-->
    </div><!--/row-->

	<div class="row">
        <div class="box col-md-12">
            <div class="box-inner">
                <div class="box-header well" data-original-title="">
                    <h2><i class="glyphicon glyphicon-info-sign"></i>详细业务设置</h2>

                    <div class="box-icon">
                        <a href="#" class="btn btn-minimize btn-round btn-default"><i
                                class="glyphicon glyphicon-chevron-up"></i></a>
                    </div>
                </div>
                <div class="box-content">						
					<table class="bustable" id="detailbus">
                        <tbody>
                        	<tr>
								<td style="width:20%;text-align: right;">一级业务类型编号</td>
								<td style="width:30%;text-align:left" colspan="3">
									<div class="controls">
											<input type="text" id="busiType1" name="busiType1" class="form-control"  />
									</div>
								</td>
							</tr>
							<tr>
								<td style="width:20%;text-align: right;">业务类型编号</td>
								<td style="width:30%;text-align: left;">
									<div class="controls">
											<input type="text" id="busiNo" name="busiNo" class="form-control"  value="" />
									</div>
								</td>
								<td style="width:20%;text-align: right;">业务类型名称</td>
								<td style="width:30%;text-align: left;">
									<div class="controls">
											<input type="text" id="busiName" name="busiName" class="form-control" value=""/>
									</div>
								</td>
							</tr>
							<tr>
								<td style="width:20%;text-align: right;">对应业务类型编号</td>
								<td style="width:30%;text-align: left;">
									<div class="controls">
											<input type="text" id="subusiCode" name="subusiCode" class="form-control"  value=""/>
									</div>
								</td>
								<td style="width:20%;text-align: right;">对应业务类型名称</td>
								<td style="width:30%;text-align: left;">
									<div class="controls">
											<input type="text" id="subusiName" name="subusiName" class="form-control"  value=""/>
									</div>
								</td>
							</tr>
							<tr>
								<td style="width:20%;text-align: right;">上午开始时间</td>
								<td style="width:30%;text-align: left;">
									<div class="controls">
											<input type="text" id="amSTime" name="amSTime" class="form-control"  value=""/>
									</div>
								</td>
								<td style="width:20%;text-align: right;">上午结束时间</td>
								<td style="width:30%;text-align: left;">
									<div class="controls">
											<input type="text" id="amETime" name="amETime" class="form-control"  value=""/>
									</div>
								</td>
							</tr>
							<tr>
								<td style="width:20%;text-align: right;">下午开始时间</td>
								<td style="width:30%;text-align: left;">
									<div class="controls">
											<input type="text" id="pmSTime" name="pmSTime" class="form-control"  value=""/>
									</div>
								</td>
								<td style="width:20%;text-align: right;">下午结束时间</td>
								<td style="width:30%;text-align: left;">
									<div class="controls">
											<input type="text" id="pmETime" name="pmETime" class="form-control"  value=""/>
									</div>
								</td>
							</tr>
							<tr>
								<td style="width:20%;text-align: right;">分流提示</td>
								<td style="width:30%;text-align:left" colspan="3">
									<div class="controls">
											<input type="text" id="flNote" name="flNote" class="form-control" />
									</div>
								</td>
							</tr>
							<tr>
								<td style="width:20%;text-align: right;">是否在排号机显示</td>
								<td style="width:30%;text-align:left" colspan="3">
									<div class="controls">
										<input type="checkbox" id="qmsFlag" name="qmsFlag"/>
									</div>
								</td>
							</tr>
							<tr>
								<td style="width:20%;text-align: right;">非值守菜单</td>
								<td style="width:30%;text-align:left" colspan="3">
									<div class="controls">
											<input type="text" id="isDuty" name="isDuty" class="form-control" />
									</div>
								</td>
							</tr>
							<tr>
								<td style="width:20%;text-align: right;">业务类型英文名称</td>
								<td style="width:30%;text-align:left" colspan="3">
									<div class="controls">
											<input type="text" id="busiNameE" name="busiNameE" class="form-control" />
									</div>
								</td>
							</tr>
							<tr>
								<td style="width:20%;text-align: right;">英文分流提示</td>
								<td style="width:30%;text-align:left" colspan="3">
									<div class="controls">
											<input type="text" id="flNoteEn" name="flNoteEn" class="form-control"  />
									</div>
								</td>
							</tr>
						
                        </tbody>
                   </table>
                </div>
            </div>
        </div>
        <!--/span-->
    </div><!--/row-->

    <!-- content ends -->
    </div><!--/#content.col-md-0-->
</div><!--/fluid-row-->

</div><!--/.fluid-container-->

<!-- external javascript -->

<script src="../../js/bootstrap.min.js"></script>

<!-- library for cookie management -->
<script src="../../js/jquery.cookie.js"></script>
<!-- data table plugin -->
<script src='../../js/jquery.dataTables.min.js'></script>

<!-- select or dropdown enhancer -->
<script src="../../js/chosen.jquery.min.js"></script>
<!-- plugin for gallery image view -->
<script src="../../js/jquery.colorbox-min.js"></script>
<!-- notification plugin -->
<script src="../../js/jquery.noty.js"></script>
<!-- library for making tables responsive -->
<script src="../../js/responsive-tables.js"></script>
<!-- tour plugin -->
<script src="../../js/bootstrap-tour.min.js"></script>
<!-- star rating plugin -->
<script src="../../js/jquery.raty.min.js"></script>
<!-- for iOS style toggle switch -->
<script src="../../js/jquery.iphone.toggle.js"></script>
<!-- autogrowing textarea plugin -->
<script src="../../js/jquery.autogrow-textarea.js"></script>
<!-- multiple file upload plugin -->
<script src="../../js/jquery.uploadify-3.1.min.js"></script>
<!-- history.js for cross-browser state change on ajax -->
<script src="../../js/jquery.history.js"></script>
<!-- application script for Charisma demo -->
<script src="../../js/charisma.js"></script>
<script type="text/javascript" src="../../js/jquery.metadata.js"></script>
<script type="text/javascript" src="../../js/jquery.validate.js"></script>
<script type="text/javascript" src="../../js/qmsVld.js"></script>

<script type="text/javascript">

var $qmsIp = $.qms.getCache("qmsIp");
var $rowNum = 0;
$(function(){
	$("input").iCheck({
	checkboxClass: 'icheckbox_minimal-yellow',
	radioClass: 'iradio_minimal-yellow',
	increaseArea: '20%' // optional
	});
	
    $('#detailbus input').attr("disabled","disabled");
	
	//发送报文
	var args ={};
	args.biom ={};
	args.biom.head ={};
	args.biom.head.tradeCode = "servicequery";
	args.biom.head.qmsIp =$qmsIp;
	args.biom.body ={};
	args.biom.body.busTypeNo ="业务类型编号";
	//alert($.toJSON(args));
	args.callback="servicequery2JSCallback";
	$.icbcQms.servicequery2JS(args);
	
	//点击查看详细业务
	
})

function servicequery2JSCallback(args){
	//alert(args);
	closeLoading();
	$("#container").css("display","block");
	var jo = $.parseJSON(args);
	var retCode = jo.biom.head.retCode;
	var retMsg =jo.biom.head.retMsg;
	//alert(retCode+"|"+retMsg);
	if (retCode==0) {
		$.each(jo.biom.body.servicequeryList.servicequeryRecord, function (index, item){
			initData(item);
		});
	} else{
		//跳转错误页面
		window.location.href = "timeout.html?retMsg="+retMsg;
	}
}

function getDetail(trObj){
	//清除
	$('#detailbus input').attr("value","");
	
    var obj = $(trObj).data("itemData");
	$('#busiType1').val(obj.busiType1);
	$('#busiNo').val(obj.busiNo);
	$('#busiName').val(obj.busiName);
	$('#subusiCode').val(obj.subusiCode);
	$('#subusiName').val(obj.subusiName);
	$('#amSTime').val(obj.amSTime);
	$('#amETime').val(obj.amETime);
	$('#pmSTime').val(obj.pmSTime);
	$('#pmETime').val(obj.pmETime);
	$('#flNote').val(obj.flNote);
	if(obj.qmsFlag == "1"){
		$('#qmsFlag').iCheck('check');
	} else{
		$('#qmsFlag').iCheck('uncheck');
	};
	$('#isDuty').val(obj.isDuty);
	$('#busiNameE').val(obj.busiNameE);
	$('#flNoteEn').val(obj.flNoteEn);
}

//初始化加载表数据
function initData(itemData){
	var $tbody = $("#ccc tbody");
	if($tbody.find("tr:last")){
		var num = $tbody.find("tr:last").find("td").eq(0).text();
		if(num){
			$rowNum = num;
		}
	}
	$rowNum++;	
	var $tr = $('<tr onclick=getDetail(this)>'
	    +"<td>"+$rowNum+"</td>"
		+'<td>'+itemData.busiType1+'</td>'
		+'<td>'+itemData.busiNo+'</td>'
		+'<td>'+itemData.busiName+'</td>'
		+'<td>'+itemData.subusiCode+'</td>'
		+'<td>'+itemData.subusiName+'</td>'
		+'</tr>');
	$tr.data("itemData",itemData);
	$tbody.append($tr);
	//alert($tr.get(0));
}
</script>

</body>
</html>
